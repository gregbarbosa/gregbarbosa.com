---
import { type CollectionEntry, getCollection } from 'astro:content'
import BaseHead from '../../components/BaseHead.astro'
import Navbar from '../../components/Navbar.astro'
import Footer from '../../components/Footer.astro'

export async function getStaticPaths() {
	const reviews = await getCollection('book-reviews')
	return reviews.map((review) => ({
		params: { slug: review.slug },
		props: review,
	}))
}
type Props = CollectionEntry<'book-reviews'>

const review = Astro.props
const { Content } = await review.render()
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead
			title={review.data.title}
			description={`Review of ${review.data.title} by ${review.data.author}`}
		/>
	</head>
	<body>
		<Navbar />
		<main>
			<article>
				<div class="prose">
					<div class="title">
						<h1>{review.data.title}</h1>
						<p>Author: {review.data.author}</p>
						<p>Rating: {review.data.rating}</p>
						<p>Genre: {review.data.genre}</p>
						<p>Format: {review.data.format}</p>
						<a href={review.data.link} target="_blank">Book Link</a>
						<hr />
					</div>
					<Content />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>
