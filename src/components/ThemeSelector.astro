---
import { Icon } from 'astro-icon/components'
import { Button } from '@/components/starwind/button'
import {
	Dropdown,
	DropdownTrigger,
	DropdownContent,
	DropdownItem,
} from '@/components/starwind/dropdown'

const { class: className } = Astro.props
---

<Dropdown class:list={[className]} openOnHover>
	<DropdownTrigger asChild>
		<Button
			variant="ghost"
			size="icon"
			class="rounded-full md:opacity-80 hover:opacity-100 transition-opacity"
			aria-label="Select Theme"
		>
			<Icon
				name="mdi:white-balance-sunny"
				class="theme-icon-light hidden text-2xl md:text-xl"
				aria-hidden
			/>
			<Icon
				name="mdi:moon-and-stars"
				class="theme-icon-dark hidden text-2xl md:text-xl"
				aria-hidden
			/>
		</Button>
	</DropdownTrigger>
	<DropdownContent align="end" class="w-32">
		<DropdownItem data-theme="theme-auto" class="theme-button cursor-pointer">
			<Icon name="mdi:brightness-auto" class="mr-2 h-4 w-4" />
			<span>System</span>
		</DropdownItem>
		<DropdownItem data-theme="theme-light" class="theme-button cursor-pointer">
			<Icon name="mdi:white-balance-sunny" class="mr-2 h-4 w-4" />
			<span>Light</span>
		</DropdownItem>
		<DropdownItem data-theme="theme-dark" class="theme-button cursor-pointer">
			<Icon name="mdi:moon-and-stars" class="mr-2 h-4 w-4" />
			<span>Dark</span>
		</DropdownItem>
	</DropdownContent>
</Dropdown>

<style>
	@reference "../styles/starwind.css";

	.theme-button.active {
		@apply bg-accent text-accent-foreground font-medium;
	}

	:global(.dark) .theme-icon-dark {
		display: block !important;
	}
	:global(html:not(.dark)) .theme-icon-light {
		display: block !important;
	}
</style>
