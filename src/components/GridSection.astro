---
interface Props {
	columns?:
		| number
		| {
				base?: number
				sm?: number
				md?: number
				lg?: number
				xl?: number
				'2xl'?: number
		  }
	gap?: string
	class?: string
}

const { columns = 1, gap = '1.5rem', class: className } = Astro.props

const col = typeof columns === 'number' ? { base: 1, lg: columns } : columns

const colMap: Record<number, string> = {
	1: 'grid-cols-1',
	2: 'grid-cols-2',
	3: 'grid-cols-3',
	4: 'grid-cols-4',
	5: 'grid-cols-5',
	6: 'grid-cols-6',
}

const colResponsiveMap: Record<string, Record<number, string>> = {
	sm: { 1: 'sm:grid-cols-1', 2: 'sm:grid-cols-2', 3: 'sm:grid-cols-3', 4: 'sm:grid-cols-4', 5: 'sm:grid-cols-5', 6: 'sm:grid-cols-6' },
	md: { 1: 'md:grid-cols-1', 2: 'md:grid-cols-2', 3: 'md:grid-cols-3', 4: 'md:grid-cols-4', 5: 'md:grid-cols-5', 6: 'md:grid-cols-6' },
	lg: { 1: 'lg:grid-cols-1', 2: 'lg:grid-cols-2', 3: 'lg:grid-cols-3', 4: 'lg:grid-cols-4', 5: 'lg:grid-cols-5', 6: 'lg:grid-cols-6' },
	xl: { 1: 'xl:grid-cols-1', 2: 'xl:grid-cols-2', 3: 'xl:grid-cols-3', 4: 'xl:grid-cols-4', 5: 'xl:grid-cols-5', 6: 'xl:grid-cols-6' },
	'2xl': { 1: '2xl:grid-cols-1', 2: '2xl:grid-cols-2', 3: '2xl:grid-cols-3', 4: '2xl:grid-cols-4', 5: '2xl:grid-cols-5', 6: '2xl:grid-cols-6' },
}

const gridClass = [
	'grid',
	col.base ? colMap[col.base] : colMap[1],
	col.sm ? colResponsiveMap.sm[col.sm] : '',
	col.md ? colResponsiveMap.md[col.md] : '',
	col.lg ? colResponsiveMap.lg[col.lg] : '',
	col.xl ? colResponsiveMap.xl[col.xl] : '',
	col['2xl'] ? colResponsiveMap['2xl'][col['2xl']] : '',
]
	.filter(Boolean)
	.join(' ')
---

<section class:list={[gridClass, className]} style={{ gap }}>
	<slot />
</section>
